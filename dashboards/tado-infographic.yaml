# Tado Infographic Dashboard
# Visual house-plan style dashboard with temperature overlays

title: Tado Smart Home
theme: tado_theme
icon: mdi:home-thermometer
background: "center / cover no-repeat linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"
path: tado-infographic

views:
  - title: Home
    path: home
    icon: mdi:home
    panel: true
    cards:
      # Main infographic card - house layout with overlays
      - type: picture-elements
        image: /local/house-layout-dynamic.svg
        style: |
          ha-card {
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          }
        elements:
          # Living Room Temperature Display
          - type: custom:button-card
            entity: climate.living_room_thermostat
            style:
              top: 60%
              left: 25%
              width: 120px
              height: 120px
            name: ""
            show_state: false
            styles:
              card:
                - background: |
                    [[[
                      const temp = entity.attributes.current_temperature;
                      if (temp > 22) return 'radial-gradient(circle, #FF6B6B, #FF8E53)';
                      if (temp > 18) return 'radial-gradient(circle, #4ECDC4, #44A08D)';
                      return 'radial-gradient(circle, #A8E6CF, #7FCDCD)';
                    ]]]
                - border-radius: 50%
                - border: 4px solid white
                - box-shadow: 0 4px 20px rgba(0,0,0,0.3)
                - color: white
            custom_fields:
              temp: |
                [[[
                  const current = entity.attributes.current_temperature || 'N/A';
                  const target = entity.attributes.temperature || 'N/A';
                  return `
                    <div style="text-align: center; padding: 10px;">
                      <div style="font-size: 28px; font-weight: bold; margin-bottom: 5px;">${current}°</div>
                      <div style="font-size: 12px; opacity: 0.9;">Target: ${target}°</div>
                      <div style="font-size: 10px; opacity: 0.8; margin-top: 5px;">Living Room</div>
                    </div>
                  `;
                ]]]
            tap_action:
              action: more-info

          # Kitchen Temperature Display
          - type: custom:button-card
            entity: climate.kitchen_thermostat
            style:
              top: 35%
              left: 70%
              width: 100px
              height: 100px
            name: ""
            show_state: false
            styles:
              card:
                - background: |
                    [[[
                      const temp = entity.attributes.current_temperature;
                      if (temp > 22) return 'radial-gradient(circle, #FF6B6B, #FF8E53)';
                      if (temp > 18) return 'radial-gradient(circle, #4ECDC4, #44A08D)';
                      return 'radial-gradient(circle, #A8E6CF, #7FCDCD)';
                    ]]]
                - border-radius: 50%
                - border: 3px solid white
                - box-shadow: 0 4px 15px rgba(0,0,0,0.3)
                - color: white
            custom_fields:
              temp: |
                [[[
                  const current = entity.attributes.current_temperature || 'N/A';
                  const target = entity.attributes.temperature || 'N/A';
                  return `
                    <div style="text-align: center; padding: 8px;">
                      <div style="font-size: 24px; font-weight: bold; margin-bottom: 3px;">${current}°</div>
                      <div style="font-size: 10px; opacity: 0.9;">→ ${target}°</div>
                      <div style="font-size: 8px; opacity: 0.8; margin-top: 3px;">Kitchen</div>
                    </div>
                  `;
                ]]]
            tap_action:
              action: more-info

          # Bedroom 1 Temperature (conditional)
          - type: conditional
            conditions:
              - entity: input_number.tado_number_of_bedrooms
                state_not: "0"
            elements:
              - type: custom:button-card
                entity: climate.bedroom_1_thermostat
                style:
                  top: 25%
                  left: 85%
                  width: 90px
                  height: 90px
                name: ""
                show_state: false
                styles:
                  card:
                    - background: |
                        [[[
                          const temp = entity.attributes.current_temperature;
                          if (temp > 22) return 'radial-gradient(circle, #FF6B6B, #FF8E53)';
                          if (temp > 18) return 'radial-gradient(circle, #4ECDC4, #44A08D)';
                          return 'radial-gradient(circle, #A8E6CF, #7FCDCD)';
                        ]]]
                    - border-radius: 50%
                    - border: 3px solid white
                    - box-shadow: 0 4px 15px rgba(0,0,0,0.3)
                    - color: white
                custom_fields:
                  temp: |
                    [[[
                      const current = entity.attributes.current_temperature || 'N/A';
                      const target = entity.attributes.temperature || 'N/A';
                      return `
                        <div style="text-align: center; padding: 6px;">
                          <div style="font-size: 20px; font-weight: bold; margin-bottom: 2px;">${current}°</div>
                          <div style="font-size: 9px; opacity: 0.9;">→ ${target}°</div>
                          <div style="font-size: 7px; opacity: 0.8; margin-top: 2px;">Bedroom</div>
                        </div>
                      `;
                    ]]]
                tap_action:
                  action: more-info

          # Bedroom 2 Temperature (conditional)
          - type: conditional
            conditions:
              - entity: input_number.tado_number_of_bedrooms
                state: "2"
              - entity: input_number.tado_number_of_bedrooms
                state: "3"
              - entity: input_number.tado_number_of_bedrooms
                state: "4"
              - entity: input_number.tado_number_of_bedrooms
                state: "5"
              - entity: input_number.tado_number_of_bedrooms
                state: "6"
            condition_type: or
            elements:
              - type: custom:button-card
                entity: climate.bedroom_2_thermostat
                style:
                  top: 75%
                  left: 15%
                  width: 90px
                  height: 90px
                name: ""
                show_state: false
                styles:
                  card:
                    - background: |
                        [[[
                          const temp = entity.attributes.current_temperature;
                          if (temp > 22) return 'radial-gradient(circle, #FF6B6B, #FF8E53)';
                          if (temp > 18) return 'radial-gradient(circle, #4ECDC4, #44A08D)';
                          return 'radial-gradient(circle, #A8E6CF, #7FCDCD)';
                        ]]]
                    - border-radius: 50%
                    - border: 3px solid white
                    - box-shadow: 0 4px 15px rgba(0,0,0,0.3)
                    - color: white
                custom_fields:
                  temp: |
                    [[[
                      const current = entity.attributes.current_temperature || 'N/A';
                      const target = entity.attributes.temperature || 'N/A';
                      return `
                        <div style="text-align: center; padding: 6px;">
                          <div style="font-size: 20px; font-weight: bold; margin-bottom: 2px;">${current}°</div>
                          <div style="font-size: 9px; opacity: 0.9;">→ ${target}°</div>
                          <div style="font-size: 7px; opacity: 0.8; margin-top: 2px;">Bedroom 2</div>
                        </div>
                      `;
                    ]]]
                tap_action:
                  action: more-info

          # Office Temperature (conditional)
          - type: custom:button-card
            entity: climate.office_thermostat
            style:
              top: 45%
              left: 15%
              width: 80px
              height: 80px
            name: ""
            show_state: false
            styles:
              card:
                - background: |
                    [[[
                      const temp = entity.attributes.current_temperature;
                      if (temp > 22) return 'radial-gradient(circle, #FF6B6B, #FF8E53)';
                      if (temp > 18) return 'radial-gradient(circle, #4ECDC4, #44A08D)';
                      return 'radial-gradient(circle, #A8E6CF, #7FCDCD)';
                    ]]]
                - border-radius: 50%
                - border: 2px solid white
                - box-shadow: 0 4px 12px rgba(0,0,0,0.3)
                - color: white
            custom_fields:
              temp: |
                [[[
                  const current = entity.attributes.current_temperature || 'N/A';
                  const target = entity.attributes.temperature || 'N/A';
                  return `
                    <div style="text-align: center; padding: 5px;">
                      <div style="font-size: 18px; font-weight: bold; margin-bottom: 2px;">${current}°</div>
                      <div style="font-size: 8px; opacity: 0.9;">→ ${target}°</div>
                      <div style="font-size: 6px; opacity: 0.8; margin-top: 2px;">Office</div>
                    </div>
                  `;
                ]]]
            tap_action:
              action: more-info

          # System Status Indicator (top-left)
          - type: custom:button-card
            entity: sensor.tado_system_status
            style:
              top: 8%
              left: 8%
              width: 60px
              height: 60px
            name: ""
            show_state: false
            styles:
              card:
                - background: |
                    [[[
                      if (entity.state === 'online') return 'radial-gradient(circle, #4CAF50, #45A049)';
                      if (entity.state === 'offline') return 'radial-gradient(circle, #F44336, #D32F2F)';
                      return 'radial-gradient(circle, #FF9800, #F57C00)';
                    ]]]
                - border-radius: 50%
                - border: 2px solid white
                - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
            custom_fields:
              status: |
                [[[
                  const status = entity.state || 'Unknown';
                  const icon = status === 'online' ? '✓' : status === 'offline' ? '✗' : '?';
                  return `
                    <div style="text-align: center; color: white; padding: 8px;">
                      <div style="font-size: 20px; font-weight: bold;">${icon}</div>
                      <div style="font-size: 8px; margin-top: 2px;">${status}</div>
                    </div>
                  `;
                ]]]

          # Weather Info (top-right)
          - type: custom:button-card
            entity: weather.home
            style:
              top: 8%
              right: 8%
              width: 80px
              height: 60px
            name: ""
            show_state: false
            styles:
              card:
                - background: "rgba(255, 255, 255, 0.2)"
                - border-radius: 15px
                - border: 1px solid rgba(255, 255, 255, 0.3)
                - backdrop-filter: blur(10px)
                - color: white
            custom_fields:
              weather: |
                [[[
                  const temp = entity.attributes.temperature || 'N/A';
                  const condition = entity.state || 'unknown';
                  const icon = condition === 'sunny' ? '☀️' : 
                               condition === 'cloudy' ? '☁️' : 
                               condition === 'rainy' ? '🌧️' : '🌤️';
                  return `
                    <div style="text-align: center; padding: 8px;">
                      <div style="font-size: 16px;">${icon}</div>
                      <div style="font-size: 12px; font-weight: bold; margin-top: 2px;">${temp}°</div>
                    </div>
                  `;
                ]]]

          # Quick Controls Panel (bottom)
          - type: custom:button-card
            style:
              bottom: 5%
              left: 50%
              transform: translateX(-50%)
              width: 300px
              height: 60px
            name: ""
            show_state: false
            styles:
              card:
                - background: "rgba(255, 255, 255, 0.15)"
                - border-radius: 30px
                - border: 1px solid rgba(255, 255, 255, 0.2)
                - backdrop-filter: blur(15px)
                - box-shadow: 0 8px 32px rgba(0,0,0,0.1)
            custom_fields:
              controls: |
                [[[
                  return `
                    <div style="display: flex; justify-content: space-around; align-items: center; height: 100%; padding: 0 20px;">
                      <div onclick="this.dispatchEvent(new Event('comfort-mode', {bubbles: true}))" 
                           style="background: rgba(255,105,0,0.8); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: white; font-weight: bold; font-size: 12px;">
                        🏠
                      </div>
                      <div onclick="this.dispatchEvent(new Event('eco-mode', {bubbles: true}))" 
                           style="background: rgba(76,175,80,0.8); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: white; font-weight: bold; font-size: 12px;">
                        🌱
                      </div>
                      <div onclick="this.dispatchEvent(new Event('sleep-mode', {bubbles: true}))" 
                           style="background: rgba(63,81,181,0.8); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: white; font-weight: bold; font-size: 12px;">
                        😴
                      </div>
                      <div onclick="this.dispatchEvent(new Event('away-mode', {bubbles: true}))" 
                           style="background: rgba(158,158,158,0.8); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: white; font-weight: bold; font-size: 12px;">
                        🚗
                      </div>
                    </div>
                  `;
                ]]]

          # House Info Panel (bottom-left)
          - type: custom:button-card
            entity: sensor.active_rooms_configuration
            style:
              bottom: 8%
              left: 8%
              width: 120px
              height: 50px
            name: ""
            show_state: false
            styles:
              card:
                - background: "rgba(255, 255, 255, 0.1)"
                - border-radius: 15px
                - border: 1px solid rgba(255, 255, 255, 0.2)
                - backdrop-filter: blur(10px)
                - color: white
            custom_fields:
              info: |
                [[[
                  const bedrooms = states['input_number.tado_number_of_bedrooms']?.state || '4';
                  const totalRooms = entity.attributes?.total_rooms || 'N/A';
                  return `
                    <div style="text-align: center; padding: 8px;">
                      <div style="font-size: 14px; font-weight: bold;">${totalRooms} Zones</div>
                      <div style="font-size: 10px; opacity: 0.8; margin-top: 2px;">${bedrooms} Bedrooms</div>
                    </div>
                  `;
                ]]]

          # Energy Efficiency Indicator (bottom-right)
          - type: custom:button-card
            entity: sensor.tado_energy_efficiency
            style:
              bottom: 8%
              right: 8%
              width: 80px
              height: 50px
            name: ""
            show_state: false
            styles:
              card:
                - background: |
                    [[[
                      const efficiency = parseFloat(entity.state) || 0;
                      if (efficiency > 80) return 'rgba(76, 175, 80, 0.2)';
                      if (efficiency > 60) return 'rgba(255, 193, 7, 0.2)';
                      return 'rgba(244, 67, 54, 0.2)';
                    ]]]
                - border-radius: 15px
                - border: |
                    [[[
                      const efficiency = parseFloat(entity.state) || 0;
                      if (efficiency > 80) return '1px solid rgba(76, 175, 80, 0.5)';
                      if (efficiency > 60) return '1px solid rgba(255, 193, 7, 0.5)';
                      return '1px solid rgba(244, 67, 54, 0.5)';
                    ]]]
                - backdrop-filter: blur(10px)
                - color: white
            custom_fields:
              efficiency: |
                [[[
                  const efficiency = entity.state || '0';
                  const icon = parseFloat(efficiency) > 80 ? '⭐' : 
                               parseFloat(efficiency) > 60 ? '👍' : '⚠️';
                  return `
                    <div style="text-align: center; padding: 8px;">
                      <div style="font-size: 16px;">${icon}</div>
                      <div style="font-size: 12px; font-weight: bold; margin-top: 2px;">${efficiency}%</div>
                    </div>
                  `;
                ]]]
